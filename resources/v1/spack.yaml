{% set listjoiner = joiner(',') %}
spack:
  config:
    deprecated: false
  concretizer:
    unify: true
    reuse: true
  specs:
    {% if config.specs %}
    {% for spec in config.specs %}  - {{ spec }}
    {% endfor %}
    {% else %}  - # add specs here
    {% endif %}
  packages:
    all:
      compiler: ['{{ config.compiler }}']
      variants: [{% for v in config.variants %}{{ listjoiner() }} '{{ v }}'{% endfor %}]
    mpi:
      require: 'cray-mpich'
  view:
    # https://spack.readthedocs.io/en/latest/environments.html#advanced-view-configuration
    default:
      # one of (run, roots, all)
      link: run
      root: {{ config.paths.view }}

